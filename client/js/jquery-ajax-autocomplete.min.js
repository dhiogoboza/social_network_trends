!function(t){t.fn.autocomplete=function(n){var e=t.extend({url:"",method:"POST",data:"",delay:200,onSelection:null},n);return this.each(function(){function n(t){var n=t.data("id"),o=t.html();c.val(n),i.val(o),e.onSelection&&e.onSelection(n,o)}function o(e){$container.empty().css({top:i.position().top+i.height(),left:i.position().left,width:i.width()+3}).show();for(var o=0;o<e.length;o++){var a=e[o],c=t("<div />").addClass("item").html(a.name).data("id",a.id).on("click",function(){n(t(this))});$container.append(c)}}function a(t,n,e){alert("Error at request")}var i,c=t(this),r=0;(i=c.clone()).attr("id",""),i.attr("name",""),i.insertAfter(c),c.hide(),$container=t(".a-ac-container"),$container.length||($container=t("<div />").addClass("a-ac-container"),t("body").append($container)),i.on("input",function(){0!==r&&clearTimeout(r),r=setTimeout(function(){!function(n,e,o,a,i,c){t.ajax({url:n,type:o,dataType:"json",data:"text="+e+"&"+a,success:function(t){i(t)},error:function(t,n,e){c(t,n,e)}})}(e.url,i.val(),e.method,e.data,o,a)},e.delay)}).focusout(function(){setTimeout(function(){$container.empty().hide()},100)})})}}(jQuery);